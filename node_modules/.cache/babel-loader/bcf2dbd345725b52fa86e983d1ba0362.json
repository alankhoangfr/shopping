{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\AlankHoang\\\\Desktop\\\\freecodeacademy\\\\shoppingbasket\\\\client\\\\src\\\\components\\\\Markers.js\";\nimport React, { Component } from 'react';\nimport { Marker } from \"react-google-maps\";\nimport basket from \"../image/basket.png\";\nimport basketSelected from \"../image/basketSelected.png\";\nexport class Markers extends Component {\n  constructor(props) {\n    super(props);\n\n    this.updating_marker = () => {\n      console.log(\"updating marker>\");\n\n      if (this.state.moving === true) {\n        var markers1 = this.insideBound_bound(this.state.markers, this.state.bound);\n        this.setState({\n          markers1: markers1,\n          moving: false,\n          input: false,\n          maploading: false\n        });\n      } else {\n        markers1 = this.insideBound(this.state.markers, this.state.movePosition);\n        this.setState({\n          markers1: markers1,\n          moving: false,\n          input: false,\n          maploading: false\n        });\n      }\n    };\n\n    this.check_markers1 = (array1, array2) => {\n      var arr1 = [];\n      var arr2 = [];\n      array1.map(elem => {\n        arr1.push(elem.photo_id);\n      });\n      array2.map(elem => {\n        arr2.push(elem.photo_id);\n      });\n\n      if (arr1.sort().toString() == arr2.sort().toString()) {\n        return true;\n      } else {\n        return false;\n      }\n    };\n\n    this.insideBound = (shops, center) => {\n      if (center != null && shops != null) {\n        var result = [];\n        shops.map(shop => {\n          if (shop.lat > center.lat - 0.2 && shop.lat < center.lat + 0.2 && shop.lng > center.lng - 0.2 && shop.lng < center.lng + 0.2) {\n            result.push(shop);\n          }\n        });\n        console.log(result, \"lets look center\", center, shops);\n        this.props.markersInBound(result);\n        return result;\n      } else {\n        return [];\n      }\n    };\n\n    this.insideBound_bound = (shops, bound) => {\n      if (bound != null && shops != null) {\n        var result = [];\n        shops.map(shop => {\n          if (shop.lat > bound.na.j && shop.lat < bound.na.l && shop.lng > bound.ia.j && shop.lng < bound.ia.l) {\n            result.push(shop);\n          }\n        });\n        console.log(result, \"lets look bound\", bound, shops);\n        this.props.markersInBound(result);\n        return result;\n      } else {\n        return [];\n      }\n    };\n\n    this.onDblClick = (marker, event) => {\n      var mark = this.state.markers1.filter(mark => {\n        return mark.photo_id === marker;\n      });\n      mark = mark[0];\n      this.props.markerSelected(mark);\n      this.setState({\n        markerSelected: mark.photo_id,\n        icon: true\n      });\n    };\n\n    this.iconBasket = marker => {\n      let icon;\n\n      if (this.props.selected.photo_id === marker.photo_id) {\n        icon = basketSelected;\n      } else {\n        icon = basket;\n      }\n\n      return icon;\n    };\n  }\n\n  componentDidMount() {\n    this.updating_marker();\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    console.log(\"should Componeent update\", nextState, this.state);\n\n    if (this.check_markers1(nextState.markers1, this.state.markers1) === false) {\n      console.log(\"change\");\n      return true;\n    } else if (this.check_markers1(nextState.markers1, this.state.markers1) === true) {\n      console.log(\"no change\");\n      return false;\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    console.log(\"componentDidUpdate\", prevState);\n    this.updating_marker();\n  }\n\n  render() {\n    this.state.markers1.map(marker => {\n      console.log(this.state.markerSelected, \"markerselected\", marker.photo_id, \"are they the same\");\n      return React.createElement(Marker, {\n        key: marker.photo_id,\n        position: {\n          lat: marker.lat,\n          lng: marker.lng\n        },\n        icon: this.iconBasket(marker),\n        onDblClick: this.onDblClick.bind(this, marker.photo_id),\n        animation: window.google.maps.Animation.DROP,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      });\n    });\n  }\n\n}\nexport default Markers;","map":{"version":3,"sources":["C:\\Users\\AlankHoang\\Desktop\\freecodeacademy\\shoppingbasket\\client\\src\\components\\Markers.js"],"names":["React","Component","Marker","basket","basketSelected","Markers","constructor","props","updating_marker","console","log","state","moving","markers1","insideBound_bound","markers","bound","setState","input","maploading","insideBound","movePosition","check_markers1","array1","array2","arr1","arr2","map","elem","push","photo_id","sort","toString","shops","center","result","shop","lat","lng","markersInBound","na","j","l","ia","onDblClick","marker","event","mark","filter","markerSelected","icon","iconBasket","selected","componentDidMount","shouldComponentUpdate","nextProps","nextState","componentDidUpdate","prevProps","prevState","snapshot","render","bind","window","google","maps","Animation","DROP"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Marker  } from \"react-google-maps\";\r\nimport basket from \"../image/basket.png\"\r\nimport basketSelected from \"../image/basketSelected.png\"\r\nexport class Markers extends Component {\r\n\tconstructor(props){\r\n\t\tsuper(props)\r\n\t\t}\r\n\tcomponentDidMount(){\r\n\t\tthis.updating_marker()\r\n\t}\r\n\tupdating_marker = ()=>{\r\n\t\tconsole.log(\"updating marker>\")\r\n\t\tif (this.state.moving===true){\r\n\t\t\tvar markers1 = this.insideBound_bound(this.state.markers,this.state.bound)\r\n\t\t\tthis.setState({\r\n\t\t\t\tmarkers1:markers1,\r\n\t\t\t\tmoving:false,\r\n\t\t\t\tinput:false,\r\n\t\t\t\tmaploading:false\r\n\t\t\t})\r\n\t\t}else{\r\n\t\t\tmarkers1 = this.insideBound(this.state.markers,this.state.movePosition)\r\n\t\t\tthis.setState({\r\n\t\t\t\tmarkers1:markers1,\r\n\t\t\t\tmoving:false,\r\n\t\t\t\tinput:false,\r\n\t\t\t\tmaploading:false,\r\n\t\t\t})\t\t\r\n\t\t}\r\n\t\t}\r\n\tshouldComponentUpdate( nextProps, nextState ){\t\r\n\t\tconsole.log(\"should Componeent update\", nextState, this.state)\r\n\t\tif (this.check_markers1(nextState.markers1,this.state.markers1)===false){\r\n\t\t\tconsole.log(\"change\")\r\n\t\t\treturn true\r\n\t\t}else if (this.check_markers1(nextState.markers1,this.state.markers1)===true){\r\n\t\t\tconsole.log(\"no change\")\r\n\t\t\treturn false\r\n\t\t}}\r\n\tcomponentDidUpdate(prevProps, prevState, snapshot){\r\n\t\tconsole.log(\"componentDidUpdate\",prevState)\r\n\t\tthis.updating_marker()\r\n\t}\r\n\tcheck_markers1=(array1,array2) => {\r\n\t\tvar arr1 = []\r\n\t\tvar arr2 = []\r\n\t\tarray1.map((elem)=>{\r\n\t\t\tarr1.push(elem.photo_id)\r\n\t\t})\r\n\t\tarray2.map((elem)=>{\r\n\t\t\tarr2.push(elem.photo_id)\r\n\t\t})\r\n\t\tif (arr1.sort().toString()==arr2.sort().toString()){\t\r\n\t\t\treturn true\r\n\t\t}else \r\n\t\t\t{return false}\r\n\t\t}\r\n\tinsideBound = (shops,center)=>{\r\n\t\tif (center!=null&&shops!=null){\r\n\t\t\tvar result = []\r\n\t\t\tshops.map((shop)=>{\r\n\t\t\t\tif (shop.lat>center.lat-0.2 && shop.lat<center.lat+0.2 && shop.lng>center.lng-0.2 && shop.lng<center.lng+0.2){\r\n\t\t\t\t\tresult.push(shop)}\t\r\n\t\t\t})\r\n\t\t\tconsole.log(result,\"lets look center\",center,shops)\t\r\n\t\t\tthis.props.markersInBound(result)\t\t\r\n\t\t\treturn result\t\t\t\r\n\t\t}else{return []}\t\t\r\n\t}\r\n\tinsideBound_bound = (shops,bound)=>{\r\n\t\tif (bound!=null&&shops!=null){\r\n\t\t\tvar result = []\t\r\n\t\t\tshops.map((shop)=>{\r\n\t\t\t\tif (shop.lat>bound.na.j && shop.lat<bound.na.l && shop.lng>bound.ia.j && shop.lng<bound.ia.l){\r\n\t\t\t\t\tresult.push(shop)}\t\r\n\t\t\t})\r\n\t\t\tconsole.log(result,\"lets look bound\",bound,shops)\t\t\r\n\t\t\tthis.props.markersInBound(result)\t\t\r\n\t\t\treturn result\t\t\t\r\n\t\t}else{return []}\r\n\t}\r\n\tonDblClick = (marker,event)=>{\t\r\n\t\tvar mark = this.state.markers1.filter((mark)=>{\r\n\t\t\treturn mark.photo_id=== marker\r\n\t\t})\r\n\t\tmark = mark[0]\r\n\t\tthis.props.markerSelected(mark)\r\n\t\tthis.setState({markerSelected:mark.photo_id, icon:true})\r\n\t} \r\n\ticonBasket = (marker)=>{\r\n\t\tlet icon\r\n\t\tif (this.props.selected.photo_id===marker.photo_id){\r\n\t\t\t\ticon = basketSelected\r\n\t\t\t}else{\r\n\t\t\t\ticon = basket\r\n\t\t\t}\r\n\t\treturn icon\t\r\n\t}\t \r\nrender()\r\n\t{this.state.markers1.map((marker) => {\t\t\t\t\r\n\t\tconsole.log(this.state.markerSelected,\"markerselected\",marker.photo_id,\"are they the same\")\r\n\treturn( \r\n\t\t<Marker\r\n\t\t\t\tkey={marker.photo_id}\r\n\t\t\t\tposition={{ lat: marker.lat, lng: marker.lng }}\r\n\t\t\t\ticon ={this.iconBasket(marker)}\r\n\t\t\t\tonDblClick = {this.onDblClick.bind(this,marker.photo_id)}\r\n\t\t\t\tanimation={window.google.maps.Animation.DROP}\r\n\t\t/>\r\n\t)\r\n\t\t\r\n\t})}\t\t\r\n\r\n}\r\nexport default Markers"]},"metadata":{},"sourceType":"module"}