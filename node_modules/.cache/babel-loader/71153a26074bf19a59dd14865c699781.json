{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\AlankHoang\\\\Desktop\\\\freecodeacademy\\\\shoppingbasket\\\\client\\\\src\\\\components\\\\Markers.js\";\nimport React, { Component } from 'react';\nimport { Marker } from \"react-google-maps\";\nimport basket from \"../image/basket.png\";\nimport basketSelected from \"../image/basketSelected.png\";\nexport class Markers extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.check_markers1 = (array1, array2) => {\n      var arr1 = [];\n      var arr2 = [];\n      array1.map(elem => {\n        arr1.push(elem.photo_id);\n      });\n      array2.map(elem => {\n        arr2.push(elem.photo_id);\n      });\n\n      if (arr1.sort().toString() == arr2.sort().toString()) {\n        return true;\n      } else {\n        return false;\n      }\n    };\n\n    this.insideBound = (shops, center) => {\n      if (center != null && shops != null) {\n        var result = [];\n        shops.map(shop => {\n          if (shop.lat > center.lat - 0.2 && shop.lat < center.lat + 0.2 && shop.lng > center.lng - 0.2 && shop.lng < center.lng + 0.2) {\n            result.push(shop);\n          }\n        });\n        console.log(result, \"lets look center\", center, shops);\n        this.props.markersInBound(result);\n        return result;\n      } else {\n        return [];\n      }\n    };\n\n    this.insideBound_bound = (shops, bound) => {\n      if (bound != null && shops != null) {\n        var result = [];\n        shops.map(shop => {\n          if (shop.lat > bound.na.j && shop.lat < bound.na.l && shop.lng > bound.ia.j && shop.lng < bound.ia.l) {\n            result.push(shop);\n          }\n        });\n        console.log(result, \"lets look bound\", bound, shops);\n        this.props.markersInBound(result);\n        return result;\n      } else {\n        return [];\n      }\n    };\n\n    this.onDblClick = (marker, event) => {\n      var mark = this.state.markers1.filter(mark => {\n        return mark.photo_id === marker;\n      });\n      mark = mark[0];\n      this.props.markerSelected(mark);\n      this.setState({\n        markerSelected: mark.photo_id,\n        icon: true\n      });\n    };\n\n    this.iconBasket = marker => {\n      let icon;\n\n      if (this.props.selected.photo_id === marker.photo_id) {\n        icon = basketSelected;\n      } else {\n        icon = basket;\n      }\n\n      return icon;\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    console.log(\"should Componeent update\", nextState, this.state);\n\n    if (this.check_markers1(nextState.markers1, this.state.markers1) === false) {\n      console.log(\"change\");\n      return true;\n    } else if (this.check_markers1(nextState.markers1, this.state.markers1) === true) {\n      console.log(\"no change\");\n      return false;\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    console.log(\"componentDidUpdate\", prevState);\n    this.updating_marker();\n  }\n\n  render() {\n    this.state.markers1.map(marker => {\n      console.log(this.state.markerSelected, \"markerselected\", marker.photo_id, \"are they the same\");\n      return React.createElement(Marker, {\n        key: marker.photo_id,\n        position: {\n          lat: marker.lat,\n          lng: marker.lng\n        },\n        icon: this.iconBasket(marker),\n        onDblClick: this.onDblClick.bind(this, marker.photo_id),\n        animation: window.google.maps.Animation.DROP,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      });\n    });\n  }\n\n}\nexport default Markers;","map":{"version":3,"sources":["C:\\Users\\AlankHoang\\Desktop\\freecodeacademy\\shoppingbasket\\client\\src\\components\\Markers.js"],"names":["React","Component","Marker","basket","basketSelected","Markers","check_markers1","array1","array2","arr1","arr2","map","elem","push","photo_id","sort","toString","insideBound","shops","center","result","shop","lat","lng","console","log","props","markersInBound","insideBound_bound","bound","na","j","l","ia","onDblClick","marker","event","mark","state","markers1","filter","markerSelected","setState","icon","iconBasket","selected","shouldComponentUpdate","nextProps","nextState","componentDidUpdate","prevProps","prevState","snapshot","updating_marker","render","bind","window","google","maps","Animation","DROP"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Marker  } from \"react-google-maps\";\r\nimport basket from \"../image/basket.png\"\r\nimport basketSelected from \"../image/basketSelected.png\"\r\n\r\n\r\nexport class Markers extends Component {\r\n\r\n\tshouldComponentUpdate( nextProps, nextState ){\t\r\n\t\tconsole.log(\"should Componeent update\", nextState, this.state)\r\n\t\tif (this.check_markers1(nextState.markers1,this.state.markers1)===false){\r\n\t\t\tconsole.log(\"change\")\r\n\t\t\treturn true\r\n\t\t}else if (this.check_markers1(nextState.markers1,this.state.markers1)===true){\r\n\t\t\tconsole.log(\"no change\")\r\n\t\t\treturn false\r\n\t\t}}\r\n\tcomponentDidUpdate(prevProps, prevState, snapshot){\r\n\t\tconsole.log(\"componentDidUpdate\",prevState)\r\n\t\tthis.updating_marker()\r\n\t}\r\n\tcheck_markers1=(array1,array2) => {\r\n\t\tvar arr1 = []\r\n\t\tvar arr2 = []\r\n\t\tarray1.map((elem)=>{\r\n\t\t\tarr1.push(elem.photo_id)\r\n\t\t})\r\n\t\tarray2.map((elem)=>{\r\n\t\t\tarr2.push(elem.photo_id)\r\n\t\t})\r\n\t\tif (arr1.sort().toString()==arr2.sort().toString()){\t\r\n\t\t\treturn true\r\n\t\t}else \r\n\t\t\t{return false}\r\n\t\t}\r\n\tinsideBound = (shops,center)=>{\r\n\t\tif (center!=null&&shops!=null){\r\n\t\t\tvar result = []\r\n\t\t\tshops.map((shop)=>{\r\n\t\t\t\tif (shop.lat>center.lat-0.2 && shop.lat<center.lat+0.2 && shop.lng>center.lng-0.2 && shop.lng<center.lng+0.2){\r\n\t\t\t\t\tresult.push(shop)}\t\r\n\t\t\t})\r\n\t\t\tconsole.log(result,\"lets look center\",center,shops)\t\r\n\t\t\tthis.props.markersInBound(result)\t\t\r\n\t\t\treturn result\t\t\t\r\n\t\t}else{return []}\t\t\r\n\t}\r\n\tinsideBound_bound = (shops,bound)=>{\r\n\t\tif (bound!=null&&shops!=null){\r\n\t\t\tvar result = []\t\r\n\t\t\tshops.map((shop)=>{\r\n\t\t\t\tif (shop.lat>bound.na.j && shop.lat<bound.na.l && shop.lng>bound.ia.j && shop.lng<bound.ia.l){\r\n\t\t\t\t\tresult.push(shop)}\t\r\n\t\t\t})\r\n\t\t\tconsole.log(result,\"lets look bound\",bound,shops)\t\t\r\n\t\t\tthis.props.markersInBound(result)\t\t\r\n\t\t\treturn result\t\t\t\r\n\t\t}else{return []}\r\n\t}\r\n\tonDblClick = (marker,event)=>{\t\r\n\t\tvar mark = this.state.markers1.filter((mark)=>{\r\n\t\t\treturn mark.photo_id=== marker\r\n\t\t})\r\n\t\tmark = mark[0]\r\n\t\tthis.props.markerSelected(mark)\r\n\t\tthis.setState({markerSelected:mark.photo_id, icon:true})\r\n\t} \r\n\ticonBasket = (marker)=>{\r\n\t\tlet icon\r\n\t\tif (this.props.selected.photo_id===marker.photo_id){\r\n\t\t\t\ticon = basketSelected\r\n\t\t\t}else{\r\n\t\t\t\ticon = basket\r\n\t\t\t}\r\n\t\treturn icon\t\r\n\t}\t \r\nrender()\r\n\t{this.state.markers1.map((marker) => {\t\t\t\t\r\n\t\tconsole.log(this.state.markerSelected,\"markerselected\",marker.photo_id,\"are they the same\")\r\n\treturn( \r\n\t\t<Marker\r\n\t\t\t\tkey={marker.photo_id}\r\n\t\t\t\tposition={{ lat: marker.lat, lng: marker.lng }}\r\n\t\t\t\ticon ={this.iconBasket(marker)}\r\n\t\t\t\tonDblClick = {this.onDblClick.bind(this,marker.photo_id)}\r\n\t\t\t\tanimation={window.google.maps.Animation.DROP}\r\n\t\t/>\r\n\t)\r\n\t\t\r\n\t})}\t\t\r\n\r\n}\r\nexport default Markers"]},"metadata":{},"sourceType":"module"}