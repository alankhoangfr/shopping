{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\AlankHoang\\\\Desktop\\\\freecodeacademy\\\\shoppingBasket\\\\client\\\\src\\\\components\\\\AddShop\\\\InfoShop.js\";\nimport React, { Component } from \"react\";\nimport { Col, Row, Button, Form, FormGroup, Label, Input, FormText } from 'reactstrap';\nimport { connect } from \"react-redux\";\nimport { addItem, getItems } from \"../../actions/itemActions\";\nimport PropTypes from \"prop-types\";\nimport Geocode from \"react-geocode\";\nimport uuid from \"uuid\";\nGeocode.setApiKey(\"AIzaSyBiffp6dvrIk_EWQHzXk05VzFKb5tioZeI\");\nGeocode.enableDebug();\n\nclass InfoShop extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.onSubmit = event => {\n      event.preventDefault();\n      const address = this.state.address + \" \" + this.state.city + \" \" + this.state.state + \" \" + this.state.postcode;\n      const match = this.props.item.markers.map(marker => {\n        let result;\n        marker.completeAddress === address ? result = true : result = false;\n        return result;\n      });\n      let regexp = /(undefined)/g;\n      const reg = this.state.address.search(regexp);\n      console.log(this.state.address.search(regexp), \"regex\");\n\n      if (match.every(mark => {\n        return mark === false;\n      }) === true && reg === -1) {\n        Geocode.fromAddress(address).then(response => {\n          const _response$results$0$g = response.results[0].geometry.location,\n                lat = _response$results$0$g.lat,\n                lng = _response$results$0$g.lng;\n          this.props.markerPosition({\n            lat: lat,\n            lng: lng\n          });\n          this.props.mapPosition({\n            lat: lat,\n            lng: lng\n          });\n          console.log(lat, lng);\n          const newMarker = {\n            id: uuid(),\n            lat: lat,\n            lng: lng,\n            name: this.state.name,\n            address: this.state.address,\n            score: \"\",\n            details: \"\",\n            city: this.state.city,\n            state: this.state.state,\n            postcode: this.state.postcode,\n            completeAddress: address\n          };\n          this.props.addItem(newMarker);\n          this.props.markerInfoFromAddress(newMarker);\n        });\n      } else if (match.every(mark => {\n        return mark === false;\n      }) === false) {\n        this.props.openAlert();\n        return null;\n      } else if (reg >= 0) {\n        this.props.openAlertDetails();\n        return null;\n      }\n    };\n\n    this.state = {\n      name: \"\",\n      address: '',\n      city: '',\n      state: '',\n      postcode: \"\",\n      completeAddress: \"\",\n      markerPresent: false\n    };\n  }\n\n  componentDidMount() {\n    console.log(\"componentDidMount\");\n    this.props.getItems();\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    console.log(\"shouldComponentUpdate\", nextProps, nextState);\n\n    if (this.props.markerInfo.completeAddress !== nextProps.markerInfo.completeAddress) {\n      console.log(\"new address\");\n      return true;\n    } else if (this.state !== nextState) {\n      console.log(\"<chainging></chainging>\");\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.markerInfo.completeAddress !== prevProps.markerInfo.completeAddress) {\n      console.log(\"componentDidUpdate\", prevProps, this.props);\n      this.setState({\n        address: this.props.markerInfo.address,\n        city: this.props.markerInfo.city,\n        state: this.props.markerInfo.state,\n        postcode: this.props.markerInfo.postcode,\n        completeAddress: this.props.markerInfo.completeAddress,\n        markerPresent: true\n      });\n    }\n  }\n\n  render() {\n    console.log(this.state);\n    return React.createElement(Form, {\n      onSubmit: this.onSubmit,\n      style: {\n        marginTop: \"20px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(Row, {\n      form: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(Col, {\n      md: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      row: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Name\"), React.createElement(Input, {\n      type: \"text\",\n      name: \"name\",\n      onChange: this.onChange,\n      value: this.state.name,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }))), React.createElement(Col, {\n      md: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      row: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, \"Address\"), React.createElement(Input, {\n      type: \"text\",\n      name: \"address\",\n      onChange: this.onChange,\n      value: this.state.address,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }))), React.createElement(Col, {\n      md: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      row: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"City\"), React.createElement(Input, {\n      type: \"text\",\n      name: \"city\",\n      onChange: this.onChange,\n      value: this.state.city,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    })))), React.createElement(Row, {\n      form: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(Col, {\n      md: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      row: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"State\"), React.createElement(Input, {\n      type: \"text\",\n      name: \"state\",\n      onChange: this.onChange,\n      value: this.state.state,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }))), React.createElement(Col, {\n      md: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(FormGroup, {\n      row: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(Label, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"Postcode\"), React.createElement(Input, {\n      type: \"text\",\n      name: \"postcode\",\n      onChange: this.onChange,\n      type: \"number\",\n      value: this.state.postcode,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    })))), React.createElement(Button, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"Add Supermarket\"));\n  }\n\n}\n\nInfoShop.propTypes = {\n  addItem: PropTypes.func.isRequired,\n  getItems: PropTypes.func.isRequired,\n  item: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  item: state.item\n});\n\nexport default connect(mapStateToProps, {\n  getItems,\n  addItem\n})(InfoShop);","map":{"version":3,"sources":["C:\\Users\\AlankHoang\\Desktop\\freecodeacademy\\shoppingBasket\\client\\src\\components\\AddShop\\InfoShop.js"],"names":["React","Component","Col","Row","Button","Form","FormGroup","Label","Input","FormText","connect","addItem","getItems","PropTypes","Geocode","uuid","setApiKey","enableDebug","InfoShop","constructor","props","onChange","event","setState","target","name","value","onSubmit","preventDefault","address","state","city","postcode","match","item","markers","map","marker","result","completeAddress","regexp","reg","search","console","log","every","mark","fromAddress","then","response","results","geometry","location","lat","lng","markerPosition","mapPosition","newMarker","id","score","details","markerInfoFromAddress","openAlert","openAlertDetails","markerPresent","componentDidMount","shouldComponentUpdate","nextProps","nextState","markerInfo","componentDidUpdate","prevProps","render","marginTop","propTypes","func","isRequired","object","mapStateToProps"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\"\r\nimport { Col, Row, Button, Form, FormGroup, Label, Input, FormText } from 'reactstrap';\r\nimport {connect} from \"react-redux\"\r\nimport {addItem,getItems} from \"../../actions/itemActions\"\r\nimport PropTypes from \"prop-types\"\r\nimport Geocode from \"react-geocode\";\r\nimport uuid from \"uuid\"\r\nGeocode.setApiKey(\"AIzaSyBiffp6dvrIk_EWQHzXk05VzFKb5tioZeI\");\r\nGeocode.enableDebug();\r\n\r\nclass InfoShop extends Component{\r\n\tconstructor( props ){\r\n\t\tsuper( props )\r\n\t\tthis.state = {\r\n\t\t\tname:\"\",\r\n\t\t\taddress: '',\r\n\t\t\tcity: '',\r\n\t\t\tstate: '',\r\n\t\t\tpostcode:\"\",\r\n\t\t\tcompleteAddress\t:\"\",\r\n\t\t\tmarkerPresent:false,\r\n\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\tconsole.log(\"componentDidMount\")\r\n\t\tthis.props.getItems()\r\n\t}\r\n\tshouldComponentUpdate(nextProps,nextState){\r\n\t\tconsole.log(\"shouldComponentUpdate\",nextProps,nextState)\r\n\t\tif (this.props.markerInfo.completeAddress!==nextProps.markerInfo.completeAddress){\r\n\t\t\tconsole.log(\"new address\")\r\n\t\t\treturn true\r\n\t\t}else if (this.state!==nextState){\r\n\t\t\tconsole.log(\"<chainging></chainging>\")\r\n\t\t\treturn true\r\n\t\t}else{return false}\r\n\r\n\t}\r\n\tcomponentDidUpdate(prevProps){\r\n\t\tif (this.props.markerInfo.completeAddress!==prevProps.markerInfo.completeAddress){\r\n\t\t\tconsole.log(\"componentDidUpdate\",prevProps,this.props)\r\n\t\t\tthis.setState({\r\n\t\t\t\taddress:this.props.markerInfo.address,\r\n\t\t\t\tcity:this.props.markerInfo.city,\r\n\t\t\t\tstate:this.props.markerInfo.state,\r\n\t\t\t\tpostcode:this.props.markerInfo.postcode,\r\n\t\t\t\tcompleteAddress:this.props.markerInfo.completeAddress,\r\n\t\t\t\tmarkerPresent:true,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tonChange = ( event ) => {\r\n  \t\tthis.setState({ [event.target.name]: event.target.value });\r\n \t};\r\n \tonSubmit = (event)=>{\t\r\n \t\tevent.preventDefault()\r\n \t\tconst address = this.state.address +\" \"+ this.state.city  +\" \"+ this.state.state  +\" \"+  this.state.postcode\r\n \t\tconst match = this.props.item.markers.map((marker)=>{\r\n \t\t\tlet result \r\n \t\t\tmarker.completeAddress===address?result=true:result=false\r\n \t\t\treturn result\r\n \t\t})\r\n \t\tlet regexp = /(undefined)/g\r\n \t\tconst reg=this.state.address.search(regexp)\r\n \t\tconsole.log(this.state.address.search(regexp),\"regex\")\r\n \t\tif(match.every((mark)=>{return mark===false})===true&&reg===-1){\r\n \t\t\tGeocode.fromAddress(address).then(\r\n\t\t\t\tresponse => {\r\n    \t\t\tconst { lat, lng } = response.results[0].geometry.location\r\n    \t\t\tthis.props.markerPosition({lat:lat,lng:lng})\r\n    \t\t\tthis.props.mapPosition({lat:lat,lng:lng})\r\n    \t\t\tconsole.log(lat,lng)\r\n    \t\t\tconst newMarker ={\r\n    \t\t\t\tid:uuid(),\r\n    \t\t\t\tlat:lat,\r\n    \t\t\t\tlng:lng,\r\n    \t\t\t\tname:this.state.name,\r\n    \t\t\t\taddress:this.state.address,\r\n    \t\t\t\tscore:\"\",\r\n    \t\t\t\tdetails:\"\",\r\n    \t\t\t\tcity: this.state.city,\r\n\t\t\t\t\tstate: this.state.state,\r\n\t\t\t\t\tpostcode:this.state.postcode,\r\n\t\t\t\t\tcompleteAddress\t:address,\r\n    \t\t\t}\r\n    \t\t\tthis.props.addItem(newMarker)\r\n    \t\t\tthis.props.markerInfoFromAddress(newMarker)}\r\n    \t\t\t )\r\n \t\t}else if (match.every((mark)=>{return mark===false})===false){ \r\n \t\t\tthis.props.openAlert()\r\n \t\t\treturn null\r\n \t\t}else if (reg>=0){\r\n \t\t\tthis.props.openAlertDetails()\r\n \t\t\treturn null\r\n \t\t}\r\n \t\t\r\n \t}\r\n\trender(){\r\n\t\tconsole.log(this.state)\r\n\t\treturn(\r\n\r\n\t\t<Form onSubmit={this.onSubmit} style={{marginTop:\"20px\"}} >\r\n\t\t\t<Row form>\r\n\t\t\t\t<Col md={12}>\r\n\t\t\t\t\t<FormGroup row>\r\n\t\t\t\t\t\t<Label>Name</Label>\t\r\n\t\t\t\t\t\t<Input type=\"text\" name=\"name\"  onChange={ this.onChange } value={ this.state.name } required/>\t\r\n\t\t\t\t\t\t</FormGroup>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col md={12}>\r\n\t\t\t\t\t<FormGroup row>\r\n\t\t\t\t\t\t<Label>Address</Label>\r\n\t\t\t\t\t\t\t<Input type=\"text\" name=\"address\"  onChange={ this.onChange } value={ this.state.address } required/>\t\t\t\t\t\t\r\n\t\t\t\t\t</FormGroup>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col md={12}>\r\n\t\t\t\t\t<FormGroup row>\r\n\t\t\t\t\t\t<Label>City</Label>\r\n\t\t\t\t\t\t\t<Input type=\"text\" name=\"city\"  onChange={ this.onChange }  value={ this.state.city } required/>\r\n\t\t\t\t\t</FormGroup>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t<Row form>\r\n\t\t\t\t<Col md={6}>\r\n\t\t\t\t\t<FormGroup row>\r\n\t\t\t\t\t\t<Label>State</Label>\r\n\t\t\t\t\t\t<Input type=\"text\" name=\"state\"  onChange={ this.onChange } value={ this.state.state } required/>\r\n\t\t\t\t\t</FormGroup>\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col md={6}>\r\n\t\t\t\t\t<FormGroup row>\r\n\t\t\t\t\t\t<Label>Postcode</Label>\r\n\t\t\t\t\t\t<Input type=\"text\" name=\"postcode\"  onChange={ this.onChange } type=\"number\" value={ this.state.postcode } required/>\r\n\t\t\t\t\t</FormGroup>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t<Button>Add Supermarket</Button>\r\n\t\t</Form>\r\n\r\n\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\n\r\nInfoShop.propTypes = {\r\n\taddItem:PropTypes.func.isRequired,\r\n\tgetItems:PropTypes.func.isRequired,\r\n\titem:PropTypes.object.isRequired\r\n}\r\n\r\nconst mapStateToProps = (state)=>({\r\n\titem:state.item\r\n})\r\n\r\nexport default connect(mapStateToProps,{getItems,addItem})(InfoShop)\r\n\r\n"]},"metadata":{},"sourceType":"module"}