(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{457:function(e,t,n){"use strict";var r=n(14),a=n(15),o=n(18),s=n(16),i=n(17),l=n(0),p=n.n(l),g=n(458),m=n.n(g),u=n(459),c=n.n(u),A=n(437),d=n(22),k=n(12),h=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(o.a)(this,Object(s.a)(t).call(this,e))).onDblClick=function(e,t){var r=n.props.markers1.filter(function(t){return t._id===e});r=r[0],n.props.changeMarkerSelected(r)},n.iconBasket=function(e){var t=m.a;return null!==n.props.superMarket.markerSelected&&n.props.superMarket.markerSelected._id===e._id&&(t=c.a),t},n}return Object(i.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){this.props.getSuperMarkets()}},{key:"shouldComponentUpdate",value:function(e,t){return console.log("markerShop ShouldCOmponentUpdate",e,this.props),this.props.superMarket.markerSelected!==e.superMarket.markerSelected&&(console.log("marker clicked"),!0)}},{key:"render",value:function(){var e=this;return this.props.markers1.map(function(t){return p.a.createElement(A.Marker,{key:t._id,position:{lat:t.lat,lng:t.lng},icon:e.iconBasket(t),onDblClick:e.onDblClick.bind(e,t._id),animation:window.google.maps.Animation.DROP})})}}]),t}(l.Component);t.a=Object(d.b)(function(e){return{superMarket:e.superMarket}},{getSuperMarkets:k.h,changeMarkerSelected:k.d})(h)},458:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjBREQNg4Ow2MEAAABw0lEQVRIx7XST0iUYRDH8c+uRpDQISOsKIhAD9WhdG9BEAUGnbsEER0CA29Bpw4hRGCnoD9KXYTsWtAhSSqIDrULIgWVGJ2CiMwyTd3ofTq0vL7tvrHvrjQPL8z8hvkyM++wSmsx7KBps80jRkR+uWd/84guV30XObSaUdqVXVvdNia8aKasNfaKTnrYYPWCK7k4OG3IRz8aAmw0vxLsFfQ12MF9H/Jx8MqingYBBcWVHfw0qZBIDuhKLRp1t+Jtt0mpNZEqOqPNAsjrtTMVMB0DCigmUyeEhu7xkkh7PiEUK9Ss1uO9meQIb80l1rhVn9aaoi8GBZDTbaw6/dhU7B9RFmreJ+sr+U7B2WrAoMiGjAMcFxwg/5dYlLMvI6AgMqFqyhL6dWcC9HpjrlrM+Zwyd/orO0V1B0HJHrszdbBkMU0eEHRk3ILaDniO22YyVI4bTgOMGXU45YBq7esfwH+zbW555nJ8d7DLHU+dt7Z+eZt3lpRExmNti1nfTApu1gccFRzDBcGOitYvKGDEcrKHfCogoKXyhYoWxVpQ19aZsuylyINY6zBj3mvBjSxL3Oy6Jy5qS2idRjxyzppm/so/7Tcq94+QjVQ+/AAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0wNS0xN1QxNDo1NDoxNCswMjowMCchyF0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMDUtMTdUMTQ6NTQ6MTQrMDI6MDBWfHDhAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg=="},459:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAADdAAAA3QFwU6IHAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAa1QTFRF////AACAAABVAACAMwBmKwCAIACAJwB2JACAIgB3IACAGgBzIwB0IAB1HQd1HAd1HgZ3HwV4HwV6HQV2HgR5HwR4HQR4HAR4HwN3HgN5HwN4HwN5HQN3HQN4HgN3HQV4HQV4HwV4HgV5HgR4HgR3HgR4HQR3HwR3HwR4HwR5HwR3HgN5HwN4HgN4HgN4HQN3HQN4HQV5HgV4HgR3HwR3HgR4HgR4HgR4HgR4HgR4HgR5HgR4HgR4RU+gaJPDYoa9caXNdq3ROz2VY0+mZFGoeLTTHgR4VW6vgXC7HgR4NC6PWXSzNC6OVW2wW3m1W3q2gcHbHgR4LiOIhcngTV6nS1umTzmYHgR4HgR4RE6ekIDFkYHFitTlHQR4HgR4jNjnJA5+HgR4erXVNjGPfrzZMy2NMimNMiqMkeHsHgV4HQV4MhmGHgV4LxaDHgR4HgR4LhaDk+TtLCCGLRSBHgR4KhuEHgR5HwV4JhOAHwV5JRJ/k+buHgR4HgR4lOfvHgR4HgR4keLsIAd6HgR4HgR4HwZ5Hwd5HgR4HgV4lOfvm4zMHgR4lObvlOfvm4zMlU76tgAAAIt0Uk5TAAIDBAUGCA0ODxAUFhgjJSsxMjQ7QkZISUxRUlhZXmBobHB3eHl6fH2FjZKVl5mcnaWoq6+wsbO0tbi5u7+/wMDAwcHBwcLCwsPDw8TExMTExsfHyMnJys7Ozs7P0NLS19jZ29ze39/f4OHh4uPk5eXl5ufo6e3w8PHx8fP09ff5+fr7/Pz8/v7+/tyk7M4AAAE2SURBVBgZlcGFWsIAFAbQH1QUEbG7u7u7xW7sTuzAFltBrtdndkNEPzannoNfpeUaoCjbZqsOgxJD7tVNCBTpHgugbG4Cyooean5QHApREh2uyjubhSiU2lne2C5EPrc9LO+4Ak7jyyzq73XrXmLBAWXBKe/5mplfh8/dTjtZMEKRcEqkeZbTQDo4BVEzy5k044PK2seCu/qWTwMseLkohUvHOgtWzunTwh0zb1AqXHLslyw1SOFwiaMZlmq0aeESSKNNUmuLcDshGdY4uNVa9FIafMmmACiKoroSiQh8k79nkcjAP/mnVCVoINJnlcd4QWLIvkWFEKi373coE55CyPjWZtUCiKVph2lTBQ/BZHxrtfoBiKEph8msgqcu+z4VQKA2Px1ROiR8kyvjvSHSZZRFq/A3788byH5ScK71AAAAAElFTkSuQmCC"},566:function(e,t,n){"use strict";n.r(t),n.d(t,"MapAddShop",function(){return H});var r=n(14),a=n(15),o=n(18),s=n(16),i=n(17),l=n(0),p=n.n(l),g=n(437),m=n(93),u=n.n(m),c=n(481),A=n.n(c),d=(n(102),n(22)),k=n(12),h=n(457);u.a.setApiKey("AIzaSyBiffp6dvrIk_EWQHzXk05VzFKb5tioZeI"),u.a.enableDebug();var H=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(o.a)(this,Object(s.a)(t).call(this,e))).updating_marker=function(){if(!0===n.state.moving){var e=n.insideBound_bound(n.props.superMarket.markers,n.state.bound);n.setState({markers1:e,moving:!1,input:!1,maploading:!1})}else e=n.insideBound(n.props.superMarket.markers,n.state.movePosition),n.setState({markers1:e,moving:!1,input:!1,maploading:!1})},n.getStreetNumber=function(e){for(var t=0;t<e.length;t++)if(e[t].types[0]&&"street_number"===e[t].types[0])return e[t].long_name},n.getStreet=function(e){for(var t=0;t<e.length;t++)if(e[t].types[0]&&"route"===e[t].types[0])return e[t].long_name},n.getPostcode=function(e){for(var t=0;t<e.length;t++)if(e[t].types[0]&&"postal_code"===e[t].types[0])return e[t].long_name},n.getCity=function(e){for(var t=0;t<e.length;t++)if(e[t].types[0])for(var n=0;n<e[t].types.length;n++)if("sublocality_level_1"===e[t].types[n]||"locality"===e[t].types[n])return e[t].long_name},n.getState=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)if(e[n].types[0]&&"administrative_area_level_1"===e[n].types[0])return e[n].short_name},n.onMarkerDragEnd=function(e){var t=e.latLng.lat(),r=e.latLng.lng();u.a.fromLatLng(t,r).then(function(e){var a=e.results[0].formatted_address,o=e.results[0].address_components,s=n.getStreetNumber(o),i=n.getStreet(o),l=n.getCity(o),p=n.getPostcode(o),g=n.getState(o),m=s+" "+i;n.props.markerInfoMap({completeAddress:a||"",address:m||"",postcode:p||"",city:l||"",state:g||"",markerPosition:{lat:t,lng:r},mapPosition:{lat:t,lng:r}}),n.setState({markerPosition:{lat:t,lng:r}})},function(e){console.error(e)})},n.check_markers1=function(e,t){var n=[],r=[];return e.map(function(e){n.push(e._id)}),t.map(function(e){r.push(e._id)}),n.sort().toString()==r.sort().toString()},n.onPlaceSelected=function(e,t){if(void 0!==e.name)u.a.fromAddress(e.name).then(function(e){var t=e.results[0].geometry.location,r=t.lat,a=t.lng,o=n.insideBound(n.props.superMarket.markers,e.results[0].geometry.location);if(void 0===r)return null;n.setState({mapPosition:{lat:r,lng:a},markerPosition:{lat:r,lng:a},movePosition:{lat:r,lng:a},zoom:11,markers1:o,input:!0,moving:!1})});else{e.formatted_name;var r=e.geometry.location.lat(),a=e.geometry.location.lng(),o=n.insideBound(n.props.superMarket.markers,e.geometry.location);n.setState({mapPosition:{lat:r,lng:a},markerPosition:{lat:r,lng:a},movePosition:{lat:r,lng:a},zoom:11,markers1:o,input:!0,moving:!1})}n.props.changeMarkerSelected(null)},n.mapmoved=function(){var e=n.insideBound_bound(n.props.superMarket.markers,JSON.stringify(n.state.map.getBounds()));n.setState({bound:JSON.stringify(n.state.map.getBounds()),movePosition:{lat:n.state.map.getCenter().lat(),lng:n.state.map.getCenter().lng()},mapPosition:{lat:n.state.map.getCenter().lat(),lng:n.state.map.getCenter().lng()},markers1:e,moving:!0})},n.maploaded=function(e){e&&n.setState({map:e,maploading:!0})},n.onZoom=function(){var e=n.insideBound_bound(n.props.superMarket.markers,JSON.stringify(n.state.map.getBounds()));n.setState({bound:JSON.stringify(n.state.map.getBounds()),movePosition:{lat:n.state.map.getCenter().lat(),lng:n.state.map.getCenter().lng()},mapPosition:{lat:n.state.map.getCenter().lat(),lng:n.state.map.getCenter().lng()},markers1:e,zoom:n.state.map.getZoom(),moving:!0})},n.insideBound=function(e,t){if(null!=t&&null!=e){var r=[];return e.map(function(e){e.lat>t.lat-.2&&e.lat<t.lat+.2&&e.lng>t.lng-.2&&e.lng<t.lng+.2&&r.push(e)}),n.props.markersInBound(r),r}return[]},n.insideBound_bound=function(e,t){if(null!=t&&null!=e){t=JSON.parse(t);var r=[];return e.map(function(e){e.lat>t.south&&e.lat<t.north&&e.lng>t.west&&e.lng<t.east&&r.push(e)}),n.props.markersInBound(r),r}return[]},n.state={completeAddress:"",address:"",city:"",postcode:"",state:"",bound:null,input:"",mapPosition:{lat:n.props.center.lat,lng:n.props.center.lng},markerPosition:{lat:n.props.center.lat,lng:n.props.center.lng},movePosition:{lat:n.props.center.lat,lng:n.props.center.lng},map:null,markers1:[],zoom:15,moving:!1,maploading:!1},n}return Object(i.a)(t,e),Object(a.a)(t,[{key:"componentDidMount",value:function(){this.props.getSuperMarkets(),this.updating_marker()}},{key:"shouldComponentUpdate",value:function(e,t){return console.log("should Componeent update",t,this.state,e,this.props),!1===this.check_markers1(t.markers1,this.state.markers1)?(console.log("change"),!0):!0!==e.loading&&!0!==this.props.loading&&(!0===t.input?(console.log("change position"),!0):!1===this.check_markers1(e.superMarket.markers,this.props.superMarket.markers)?(console.log("new shops"),!0):this.props.centerMarker!==e.centerMarker||(!0===this.check_markers1(t.markers1,this.state.markers1)?(console.log("no change"),!1):void 0))}},{key:"componentDidUpdate",value:function(e,t,n){if(e.superMarket.markers!==this.props.superMarket.markers){var r=this.insideBound(this.props.superMarket.markers,this.state.markerPosition);this.setState({mapPosition:{lat:this.props.center.lat,lng:this.props.center.lng},movePosition:{lat:this.props.center.lat,lng:this.props.center.lng},markers1:r})}else this.props.centerMarker!==e.centerMarker?this.setState({markerPosition:this.state.movePosition}):this.updating_marker()}},{key:"render",value:function(){var e,t=this,n=Object(g.withScriptjs)(Object(g.withGoogleMap)(function(e){return p.a.createElement(g.GoogleMap,{ref:t.maploaded,zoom:t.state.zoom,defaultCenter:{lat:t.props.center.lat,lng:t.props.center.lng},center:{lat:t.state.mapPosition.lat,lng:t.state.mapPosition.lng},onDragEnd:t.mapmoved,onZoomChanged:t.onZoom},p.a.createElement(A.a,{style:{width:"200%",height:"40px",paddingLeft:"16px",margin:"2px auto 20px auto"},onPlaceSelected:t.onPlaceSelected,types:["(regions)"],placeholder:"Enter and select location"}),p.a.createElement(g.Marker,{draggable:!0,onDragEnd:t.onMarkerDragEnd,position:{lat:t.state.markerPosition.lat,lng:t.state.markerPosition.lng}}),p.a.createElement(h.a,{markers1:t.state.markers1}))}));return e=p.a.createElement("div",{style:{width:"100%"}},p.a.createElement(n,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyBiffp6dvrIk_EWQHzXk05VzFKb5tioZeI&libraries=places",loadingElement:p.a.createElement("div",{style:{height:"100%"}}),containerElement:p.a.createElement("div",{style:{height:this.props.height,display:"flex",flexDirection:"column-reverse"}}),mapElement:p.a.createElement("div",{style:{height:"100%"}})})),p.a.createElement(p.a.Fragment,null,e)}}]),t}(l.Component);t.default=Object(d.b)(function(e){return{superMarket:e.superMarket}},{getSuperMarkets:k.h,changeMarkerSelected:k.d})(H)}}]);
//# sourceMappingURL=4.997e0e3d.chunk.js.map