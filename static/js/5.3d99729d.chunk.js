(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{484:function(e,t,n){"use strict";var a=n(14),o=n(15),r=n(18),s=n(16),i=n(17),l=n(0),p=n.n(l),g=n(485),A=n.n(g),m=n(486),u=n.n(m),c=n(464),d=n(22),k=n(12),h=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(r.a)(this,Object(s.a)(t).call(this,e))).onDblClick=function(e,t){var a=n.props.markers1.filter(function(t){return t._id===e});a=a[0],n.props.changeMarkerSelected(a)},n.iconBasket=function(e){var t=A.a;return null!==n.props.superMarket.markerSelected&&n.props.superMarket.markerSelected._id===e._id&&(t=u.a),t},n}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getSuperMarkets()}},{key:"shouldComponentUpdate",value:function(e,t){return console.log("markerShop ShouldCOmponentUpdate",e,this.props),this.props.superMarket.markerSelected!==e.superMarket.markerSelected&&(console.log("marker clicked"),!0)}},{key:"render",value:function(){var e=this;return this.props.markers1.map(function(t){return p.a.createElement(c.Marker,{key:t._id,position:{lat:t.lat,lng:t.lng},icon:e.iconBasket(t),onDblClick:e.onDblClick.bind(e,t._id),animation:window.google.maps.Animation.DROP})})}}]),t}(l.Component);t.a=Object(d.b)(function(e){return{superMarket:e.superMarket}},{getSuperMarkets:k.h,changeMarkerSelected:k.d})(h)},485:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjBREQNg4Ow2MEAAABw0lEQVRIx7XST0iUYRDH8c+uRpDQISOsKIhAD9WhdG9BEAUGnbsEER0CA29Bpw4hRGCnoD9KXYTsWtAhSSqIDrULIgWVGJ2CiMwyTd3ofTq0vL7tvrHvrjQPL8z8hvkyM++wSmsx7KBps80jRkR+uWd/84guV30XObSaUdqVXVvdNia8aKasNfaKTnrYYPWCK7k4OG3IRz8aAmw0vxLsFfQ12MF9H/Jx8MqingYBBcWVHfw0qZBIDuhKLRp1t+Jtt0mpNZEqOqPNAsjrtTMVMB0DCigmUyeEhu7xkkh7PiEUK9Ss1uO9meQIb80l1rhVn9aaoi8GBZDTbaw6/dhU7B9RFmreJ+sr+U7B2WrAoMiGjAMcFxwg/5dYlLMvI6AgMqFqyhL6dWcC9HpjrlrM+Zwyd/orO0V1B0HJHrszdbBkMU0eEHRk3ILaDniO22YyVI4bTgOMGXU45YBq7esfwH+zbW555nJ8d7DLHU+dt7Z+eZt3lpRExmNti1nfTApu1gccFRzDBcGOitYvKGDEcrKHfCogoKXyhYoWxVpQ19aZsuylyINY6zBj3mvBjSxL3Oy6Jy5qS2idRjxyzppm/so/7Tcq94+QjVQ+/AAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxOS0wNS0xN1QxNDo1NDoxNCswMjowMCchyF0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTktMDUtMTdUMTQ6NTQ6MTQrMDI6MDBWfHDhAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg=="},486:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAADdAAAA3QFwU6IHAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAa1QTFRF////AACAAABVAACAMwBmKwCAIACAJwB2JACAIgB3IACAGgBzIwB0IAB1HQd1HAd1HgZ3HwV4HwV6HQV2HgR5HwR4HQR4HAR4HwN3HgN5HwN4HwN5HQN3HQN4HgN3HQV4HQV4HwV4HgV5HgR4HgR3HgR4HQR3HwR3HwR4HwR5HwR3HgN5HwN4HgN4HgN4HQN3HQN4HQV5HgV4HgR3HwR3HgR4HgR4HgR4HgR4HgR4HgR5HgR4HgR4RU+gaJPDYoa9caXNdq3ROz2VY0+mZFGoeLTTHgR4VW6vgXC7HgR4NC6PWXSzNC6OVW2wW3m1W3q2gcHbHgR4LiOIhcngTV6nS1umTzmYHgR4HgR4RE6ekIDFkYHFitTlHQR4HgR4jNjnJA5+HgR4erXVNjGPfrzZMy2NMimNMiqMkeHsHgV4HQV4MhmGHgV4LxaDHgR4HgR4LhaDk+TtLCCGLRSBHgR4KhuEHgR5HwV4JhOAHwV5JRJ/k+buHgR4HgR4lOfvHgR4HgR4keLsIAd6HgR4HgR4HwZ5Hwd5HgR4HgV4lOfvm4zMHgR4lObvlOfvm4zMlU76tgAAAIt0Uk5TAAIDBAUGCA0ODxAUFhgjJSsxMjQ7QkZISUxRUlhZXmBobHB3eHl6fH2FjZKVl5mcnaWoq6+wsbO0tbi5u7+/wMDAwcHBwcLCwsPDw8TExMTExsfHyMnJys7Ozs7P0NLS19jZ29ze39/f4OHh4uPk5eXl5ufo6e3w8PHx8fP09ff5+fr7/Pz8/v7+/tyk7M4AAAE2SURBVBgZlcGFWsIAFAbQH1QUEbG7u7u7xW7sTuzAFltBrtdndkNEPzannoNfpeUaoCjbZqsOgxJD7tVNCBTpHgugbG4Cyooean5QHApREh2uyjubhSiU2lne2C5EPrc9LO+4Ak7jyyzq73XrXmLBAWXBKe/5mplfh8/dTjtZMEKRcEqkeZbTQDo4BVEzy5k044PK2seCu/qWTwMseLkohUvHOgtWzunTwh0zb1AqXHLslyw1SOFwiaMZlmq0aeESSKNNUmuLcDshGdY4uNVa9FIafMmmACiKoroSiQh8k79nkcjAP/mnVCVoINJnlcd4QWLIvkWFEKi373coE55CyPjWZtUCiKVph2lTBQ/BZHxrtfoBiKEph8msgqcu+z4VQKA2Px1ROiR8kyvjvSHSZZRFq/A3788byH5ScK71AAAAAElFTkSuQmCC"},592:function(e,t,n){"use strict";n.r(t),n.d(t,"Map",function(){return H});var a=n(14),o=n(15),r=n(18),s=n(16),i=n(17),l=n(0),p=n.n(l),g=n(464),A=n(94),m=n.n(A),u=n(508),c=n.n(u),d=(n(105),n(22)),k=n(12),h=n(484);m.a.setApiKey("AIzaSyBiffp6dvrIk_EWQHzXk05VzFKb5tioZeI"),m.a.enableDebug();var H=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(r.a)(this,Object(s.a)(t).call(this,e))).updating_marker=function(){if(!0===n.state.moving){var e=n.insideBound_bound(n.props.superMarket.markers,n.state.bound);n.setState({markers1:e,moving:!1,input:!1,maploading:!1})}else console.log("asdfasdfad"),e=n.insideBound(n.props.superMarket.markers,n.state.movePosition),n.setState({markers1:e,moving:!1,input:!1,maploading:!1})},n.check_markers1=function(e,t){var n=[],a=[];return e.map(function(e){n.push(e._id)}),t.map(function(e){a.push(e._id)}),n.sort().toString()==a.sort().toString()},n.onPlaceSelected=function(e,t){if(void 0!==e.name)m.a.fromAddress(e.name).then(function(e){var t=e.results[0].geometry.location,a=t.lat,o=t.lng,r=n.insideBound(n.props.superMarket.markers,e.results[0].geometry.location);if(void 0===a)return null;n.setState({mapPosition:{lat:a,lng:o},movePosition:{lat:a,lng:o},zoom:11,markers1:r,input:!0,moving:!1})});else{e.formatted_name;var a=e.geometry.location.lat(),o=e.geometry.location.lng(),r=n.insideBound(n.props.superMarket.markers,e.geometry.location);n.setState({mapPosition:{lat:a,lng:o},movePosition:{lat:a,lng:o},zoom:11,markers1:r,input:!0,moving:!1})}n.props.changeMarkerSelected(null)},n.mapmoved=function(){var e=n.insideBound_bound(n.props.superMarket.markers,JSON.stringify(n.state.map.getBounds()));n.setState({bound:JSON.stringify(n.state.map.getBounds()),movePosition:{lat:n.state.map.getCenter().lat(),lng:n.state.map.getCenter().lng()},mapPosition:{lat:n.state.map.getCenter().lat(),lng:n.state.map.getCenter().lng()},markers1:e,moving:!0})},n.maploaded=function(e){e&&n.setState({map:e,maploading:!0})},n.onZoom=function(){var e=n.insideBound_bound(n.props.superMarket.markers,JSON.stringify(n.state.map.getBounds()));n.setState({bound:JSON.stringify(n.state.map.getBounds()),movePosition:{lat:n.state.map.getCenter().lat(),lng:n.state.map.getCenter().lng()},mapPosition:{lat:n.state.map.getCenter().lat(),lng:n.state.map.getCenter().lng()},markers1:e,zoom:n.state.map.getZoom(),moving:!0})},n.insideBound=function(e,t){if(null!=t&&null!=e){var a=[];return e.map(function(e){e.lat>t.lat-.2&&e.lat<t.lat+.2&&e.lng>t.lng-.2&&e.lng<t.lng+.2&&a.push(e)}),n.props.markersInBound(a),a}return[]},n.insideBound_bound=function(e,t){if(null!=t&&null!=e){t=JSON.parse(t);var a=[];return e.map(function(e){e.lat>t.south&&e.lat<t.north&&e.lng>t.west&&e.lng<t.east&&a.push(e)}),n.props.markersInBound(a),a}return[]},n.state={bound:null,input:"",mapPosition:{lat:n.props.center.lat,lng:n.props.center.lng},movePosition:{lat:n.props.center.lat,lng:n.props.center.lng},map:null,markers1:[],zoom:15,moving:!1,maploading:!1},n}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getSuperMarkets(),this.updating_marker()}},{key:"shouldComponentUpdate",value:function(e,t){return console.log("should Componeent update",t,this.state,e,this.props),!1===this.check_markers1(t.markers1,this.state.markers1)?(console.log("change"),!0):!0===t.input?(console.log("change position"),!0):e.shopSelected!==this.props.shopSelected?(console.log("new marker selected"),!1):!1===this.check_markers1(e.superMarket.markers,this.props.superMarket.markers)?(console.log("change props markers"),!0):!0===this.check_markers1(t.markers1,this.state.markers1)?(console.log("no change"),!1):!0===e.loading||!0===this.props.loading?(console.log("loading"),!1):void 0}},{key:"componentDidUpdate",value:function(e,t,n){console.log("componentDidUpdate",t,this.state,e,this.props),this.updating_marker()}},{key:"render",value:function(){var e,t=this,n=Object(g.withScriptjs)(Object(g.withGoogleMap)(function(e){return p.a.createElement(g.GoogleMap,{ref:t.maploaded,zoom:t.state.zoom,defaultCenter:{lat:t.props.lat,lng:t.props.lng},center:{lat:t.state.mapPosition.lat,lng:t.state.mapPosition.lng},onDragEnd:t.mapmoved,onZoomChanged:t.onZoom},p.a.createElement(c.a,{style:{width:"200%",height:"40px",paddingLeft:"16px",margin:"2px auto 20px auto"},onPlaceSelected:t.onPlaceSelected,types:["(regions)"],placeholder:"Enter and select location"}),p.a.createElement(h.a,{markers1:t.state.markers1}))}));return e=p.a.createElement("div",{style:{width:"100%"}},p.a.createElement(n,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyBiffp6dvrIk_EWQHzXk05VzFKb5tioZeI&libraries=places",loadingElement:p.a.createElement("div",{style:{height:"100%"}}),containerElement:p.a.createElement("div",{style:{height:this.props.height,display:"flex",flexDirection:"column-reverse"}}),mapElement:p.a.createElement("div",{style:{height:"100%"}})})),p.a.createElement(p.a.Fragment,null,e)}}]),t}(l.Component);t.default=Object(d.b)(function(e){return{superMarket:e.superMarket}},{getSuperMarkets:k.h,changeMarkerSelected:k.d})(H)}}]);
//# sourceMappingURL=5.3d99729d.chunk.js.map